<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.skt.business.mapper.StepInstanceMapper">

	<!-- Insert 문 -->
    <insert id="insert" parameterType="com.skt.business.model.entity.StepInstance" useGeneratedKeys="true" keyProperty="id">
	    INSERT INTO rpa_step_instance (
	        rpa_step_id,
	        rpa_action_instance_id,
	        status,
	        start_time,
	        end_time,
	        frst_reg_user_id,
	        frst_reg_date,
	        chg_reg_user_id,
	        chg_reg_date
	    ) VALUES (
	        #{rpaStepId},
	        #{rpaActionInstanceId},
	        #{status},
	        #{startTime},
	        #{endTime},
	        'SYSTEM',
	        now(),
	        'SYSTEM',
	        now()
	    )
    </insert>

    <!-- Update 문 -->
    <update id="updateStepInstance" parameterType="com.skt.business.model.entity.StepInstance">
	    UPDATE rpa_step_instance
	    SET
	        status = #{status},
	        end_time = #{endTime},
	        chg_reg_user_id = 'SYSTEM',
	        chg_reg_date = now()
	    WHERE id = #{id}
    </update>
	
</mapper>
