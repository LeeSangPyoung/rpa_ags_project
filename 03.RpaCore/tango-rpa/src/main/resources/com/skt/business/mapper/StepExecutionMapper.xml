<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.skt.business.mapper.StepExecutionMapper">
	<insert id="insertStepExecution" parameterType="com.skt.business.model.entity.StepExecution" useGeneratedKeys="true" keyProperty="id">
	    INSERT INTO rpa_step_execution (
	        rpa_step_instance_id,
	        account_id,
	        status,
	        execution_group_id,
	        frst_reg_date,
	        frst_reg_user_id,
	        chg_reg_date,
	        chg_reg_user_id
	    ) VALUES (
	        #{rpaStepInstanceId},
	        #{accountId},
	        #{status},
	        #{executionGroupId},
	        now(),
	        'SYSTEM',
	        now(),
	        'SYSTEM'
	        
	    )
	</insert>
	
	<update id="updateStepExecution">
	    UPDATE rpa_step_execution
	    SET
	        status = #{status},
	        result_log = #{resultLog},
	        start_time = #{startTime},
	        end_time = #{endTime},
	        chg_reg_user_id = 'SYSTEM',  <!-- 필요시 변경자 주입 가능 -->
	        chg_reg_date = now()
	    WHERE id = #{id}
	</update>
</mapper>
